# Проектная работа "Веб-ларек"

Ссылка на проект: https://github.com/SchanderEd/web-larek-frontend.git

Архитектура проекта: MVP

- Model - слой отвечающий за хранение модели данных и их изменение.
- View - слой представления, отвечающий за отображение данных на странице.
- Presenter - слой отвечающий за связь между моделью и отображением.


Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Базовый код

### Класс Api

Содержит логику работы с Api проекта. Принимает два параметра:

1. `baseUrl` - адрес запроса
2. `options` - набор опций для отправки запроса в виде объекта, которые передаются в headers запроса.

Методы Api

- `handleResponse(response: Response)` - метод отвеающий за обработку ответа от сервера. В случае успешного запроса возвращает ответ в JSON формате, в противном случае в ответе приходит код и текст ошибки.
- `get(uri: string)` - метод отправки запроса на сервер. Возвращает данные с сервера. Принимает на вход адрес запроса.
- `post(uri: string, data: object, method: ApiPostMethods = 'POST')` - метод для отправки данных на сервер. В ответе возвращает данные с сервера в JSON формате. Принимает на вход адрес запроса, данные для передачи в виде объекта и метод запроса.

## Классы свойста Model. Слой модели.

### IProduct

Класс отвечает за хранение данных товара.

Поля:

- `id:string` - индетификатор товара. Принимает строку.
- `title: string`  - название товара. Принимает строку.
- `category: string`  - категория товара. Принимает строку
- `price: number | null` - стоимость товара. Значение может быть пустым или принимать число.
- `image: string`  - ссылка на изображение товара.
- `description: string` - описание товара. Принимает строку.

---

### ICatalog

Класс отвечает за хранение данных каталога, а также с его помощью можно получить список товаров или получить определенный товар по его id.

Поля:

- `items: IProduct[]` - параметр принимающий массив из товаров.
- `total: number` - свойства отвечающее за количество товаров в каталоге

---

### IBasket

Класс отвечает за хранение данных корзины. Также класс имеет методы позволяющие добавить или удалить товар из корзины по переданному id.

Поля:

- `items: IProduct[]` - список товаров в корзине. Принимает массив из объектов класса IProduct.

Методы:

- `addProduct(id: string)` - добавляет товар в корзину по переданному id
- `removeProduct(id: string)` - удаляет товар из корзины по переданному id

---

### IFormOrder

Класс отвечает за данные заказа из формы оформления заказа. Класс содержит способ оплаты, адресс доставки и контактые данные пользователя для оформления заказа.

Поля:

- `paymentMethod: string` - выбранный тип оплаты
- `address: string` - адрес доставки
- `email: string` - адрес эл.почты
- `phone: string` - номер телефона

---

### ISuccesOrder

Класс отвечает за данные при успешном оформлении заказа, хранит в себе итогую сумму заказа.

Поля:

- `amount: number| null` - общая сумма заказа

## Классы свойства View. Слой отображения

### ICardProduct

Класс реализует карточку товара на странице.

Поля:

- `container: HTMLElement` - контейнер карточки
- `category: HTMLSpanElement` - элемент с категорией товара
- `title: HTMLHeadingElement` - элемент с названием товара
- `img: HTMLImageElement` - элемент с картинкой товара
- `price: HTMLSpanElement` - элемент со стоимостью товара

### IModal

Реализует модальное окно. Класс содержит в себе селектор модалки, элементов управления и методы для открытия и закрытия окна.

- `modal: HTMLElement;` - селектор модального окна.
- `elForOpen: HTMLElement;` - элемент отвечающий за управление открытия окна.
- `elForClose: HTMLElement;` - элемент отвечающий за закрытие окна.
- `events: IEvents;` - брокер событий

Методы:

- `open(modal: HTMLElement)` - открывает указанное модальное окно.
- `close(modal: HTMLElement)` - закрывает указанное модальное окно.

---

### Класс IModalProduct

Класс расширяет класс IModal и ICardProduct. Предназначен для модального окна карточки товара.

Поля:

- `basketButton: HTMLButtonElement` - кнопка для добавления товара в корзину

---

### Класс ISuccesOrderModal

Класс расширяет класс IModal и отвечает за отображение модального окна успешного оформления заказа.

Поля:

- `amount: HTMLSpanElement;` - элемент разметки отображающий сумму покупки

---

### ICatalogView

Класс отвечает за отображение каталога товаров на главной странице

Поля:

- `catalogList: HTMLUListElement;` - элемент разметки с каталогом товаров

---

### IBasketView

Класс отвечает за отображение корзины на странице.

Поля:

- `counter: HTMLSpanElement` - элемент отвечающий за счётчик товаров в корзине
- `products: HTMLUListElement` - элемент со списком товаров
- `deleteProductButton: HTMLButtonElement` - элемент кнопки для удаления товара из корзины
- `amount: HTMLSpanElement` - элемент отображающий общую стоимость товаров в корзине
- `buttonForOrder: HTMLButtonElement` - элемент кнопки для оформления заказа

## Классы свойства Presenter. Слой презентера

EventEmitter - обеспечивает работу событий. Устанавливает и снимает слушателей событий, а также вызывает их при возникновении события.

Методы:

- `on()` - установить обработчик на событие
- `off()` - снять обработчик на событие
- `emit()` - инициировать событие с данными
- `onAll()` - слушать все события
- `offAll()` - сбросить все обработчики
- `trigger()` - сделать коллбек триггер, генерирующий событие при вызове